<!DOCTYPE html>
<html lang="en" class="layout-pf layout-pf-fixed transitions">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" type="image/png" href="{{ url_for('static', filename='icon.png') }}">
		<title>{% if title %}{{ title }}{% endif %}</title>		
		<link href="{{url_for('static',filename='patternfly/css/patternfly.min.css')}}" rel="stylesheet" media="screen, print">
		<link href="{{url_for('static',filename='patternfly/css/patternfly-additions.min.css')}}" rel="stylesheet" media="screen, print">
		<link href="{{url_for('static',filename='css/deskctl.css')}}" rel="stylesheet" media="screen, print">
		{%- block head %}{% endblock %}
		<script src="{{url_for('static',filename='jquery/jquery.min.js')}}"></script>
		<script src="{{url_for('static',filename='bootstrap/bootstrap.min.js')}}"></script>
		<script src="{{url_for('static',filename='patternfly/js/patternfly.min.js')}}"></script>
	</head>
	<body class="cards-pf">

<div class="modal fade" id="mabout" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content about-modal-pf">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                <span class="pficon pficon-close"></span>
              </button>
            </div>
            <div class="modal-body">
              <h1>Desktop Manager</h1>
              <div class="product-versions-pf">
                <ul class="list-unstyled">
                  <li><strong>Label</strong> Version</li>
                  <li><strong>Label</strong> Version</li>
                  <li><strong>Label</strong> Version</li>
                  <li><strong>Label</strong> Version</li>
                  <li><strong>Label</strong> Version</li>
                  <li><strong>Label</strong> Version</li>
                </ul>
              </div>
              <div class="trademark-pf">
                Copyright &copy; University of Southampton 2017
              </div>
            </div>
            <div class="modal-footer">
            </div>
          </div>
        </div>
      </div>

	{% if not is_logged_in() %}
	<div class="modal fade" id="mlogin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">

		<form role="form" action="{{ url_for('login') }}" method="POST" class="form-horizontal" >
		<input name="_csrf_token" type="hidden" value="{{ csrf_token() }}"/>
		<input name="next" type="hidden" value="{{ request.path }}"/>

            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                <span class="pficon pficon-close"></span>
              </button>
				<h4 class="modal-title">Login</h4> 
            </div>
            <div class="modal-body">
				<p>Please enter your University username and password</p>
		  <div class="form-group">
			<label class="col-sm-2 control-label">Username</label>
			<div class="col-sm-10">
			  <input name="username" type="text" class="form-control" placeholder="Username">
			</div>
		  </div>
		  <div class="form-group">
			<label class="col-sm-2 control-label">Password</label>
			<div class="col-sm-10">
			  <input name="password" type="password" class="form-control" placeholder="Password">
			</div>
		  </div>

            </div>
            <div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        		<button type="submit" class="btn btn-primary">Sign in</button>
            </div>
          </div>
        </div>
      </div>
	{% endif %}

		{%- block modals %}{% endblock %}

  <nav class="navbar navbar-pf-vertical">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a href="/" class="navbar-brand" style="padding-top: 0px; padding-bottom: 0px; line-height: 56px;">
      <span style="font-weight: 800; font-size: 18px; letter-spacing: 5px;">DESKTOP MANAGER</span> <span style="font-size: 16px;">{{ hostname }}</span>
    </a>
  </div>
  <nav class="collapse navbar-collapse">
    <ul class="nav navbar-nav navbar-right navbar-iconic">
		{%- if is_logged_in() %}
      <li class="dropdown">
        <a class="dropdown-toggle nav-item-wtf nav-item-iconic" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          <span title="Username" class="fa fa-fw fa-lock"></span> Authenticated as {{session.name}}
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
			
          <li><a href="{{url_for('logout')}}" data-toggle="modal">Logout</a></li>
        </ul>
      </li>
		{%- else %}
      <li>
        <a href="#" data-target="#mlogin" data-toggle="modal" class="nav-item-wtf nav-item-iconic">
          <span title="Help" class="fa fa-fw fa-unlock-alt"></span> Click here to make changes to this computer
        </a>
      </li>
		{%- endif %}

    </ul>
  </nav>
</nav> <!--/.navbar-->
<!----------------------------------------------------------------------------->
<div class="nav-pf-vertical nav-pf-vertical-with-sub-menus">
  <ul class="list-group">
    <li class="list-group-item{% if active == 'software' %} active{%endif%}">
      <a href="{{ url_for('software') }}">
        <span class="pficon pficon-registry" data-toggle="tooltip" title="Software"></span>
        <span class="list-group-item-value">Software</span>
      </a>
    </li>
    <li class="list-group-item">
      <a>
        <span class="pficon pficon-network" data-toggle="tooltip" title="Community software"></span>
        <span class="list-group-item-value">CSW</span>
        
      </a>
    </li>
    <li class="list-group-item secondary-nav-item-pf{% if active == 'permissions' %} active{%endif%}" data-target="#ipsum-secondary">
      <a>
        <span class="fa fa-lock" data-toggle="tooltip" title="Permissions"></span>
        <span class="list-group-item-value">Permissions</span>
      </a>
      
      <div id="-secondary" class="nav-pf-secondary-nav">
  <div class="nav-item-pf-header">
    <a class="secondary-collapse-toggle-pf" data-toggle="collapse-secondary-nav"></a>
    <span>Permissions</span>
  </div>
  <ul class="list-group">
    <li class="list-group-item{% if activegrp == 'users' %} active{%endif%}">
      <a href="{{ url_for('permissions',group='users') }}">
        <span class="list-group-item-value">SSH Access</span>
      </a>
    </li>
    <li class="list-group-item{% if activegrp == 'vboxusers' %} active{%endif%}">
      <a href="{{ url_for('permissions',group='vboxusers') }}">
        <span class="list-group-item-value">VirtualBox</span>
      </a>
    </li>
    <li class="list-group-item{% if activegrp == 'sys' %} active{%endif%}">
      <a href="{{ url_for('permissions',group='sys') }}">
        <span class="list-group-item-value">Administrators</span>
      </a>
    </li>
    <li class="list-group-item{% if activegrp == 'wheel' %} active{%endif%}">
      <a href="{{ url_for('permissions',group='wheel') }}">
        <span class="list-group-item-value">Root Access</span>
      </a>
    </li>
  </ul>
</div>

      
    </li>
    <li class="list-group-item">
      <a>
        <span class="fa fa-archive" data-toggle="tooltip" title="Backups"></span>
        <span class="list-group-item-value">Backups</span>
      </a>
    </li>
    <li class="list-group-item">
      <a>
        <span class="fa fa-gears" data-toggle="tooltip" title="Policy"></span>
        <span class="list-group-item-value">Policy</span>
      </a>
    </li>
    <li class="list-group-item">
      <a>
        <span class="pficon pficon-info" data-toggle="tooltip" title="About"></span>
        <span class="list-group-item-value">About</span>
      </a>
    </li>
  </ul>
</div>
<div class="container-fluid container-cards-pf container-pf-nav-pf-vertical">
	<div style="margin-left: auto; margin-right: auto">
			{%- for category, message in get_flashed_messages(with_categories=true) %}
			<div class="alert {{ category }}">
				<a data-dismiss="alert" class="close" href="#">Ã—</a>
				{{ message }}
			</div>
			{%- endfor %}
			{%- block body %}{% endblock %}
	</div>
</div>
<script>
  $(document).ready(function() {
    $().setupVerticalNavigation(true);
  });
</script>

	</body>
</html>
