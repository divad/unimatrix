{% extends "layout.html" %}
{% block body %}

<!--
TODO:
- add last backup date?
- add 'status'?

data on the view page:
- backup status
- startup/shutdown status
- seen on network recently?
- software update status
- puppet status
- etc.
-->

<div class="row row-cards-pf">
	<div class="col-xs-12 col-sm-12 col-md-12">
		<div class="card-pf card-pf-accented">
			<h1 style="padding-bottom: 20px"><span class="fa fa-fw fa-desktop"></span> Systems</h1>
		</div>
	</div>
</div>

<div class="row row-cards-pf">
	<div class="col-xs-12 col-sm-12 col-md-12">
		<div class="card-pf" style="padding: 0px; border-top: none;">

	<table class="table table-striped table-bordered table-hover" id="table1">
	  <thead>
		<tr>
			<th></th>
			<th>SYS</th>
			<th>CPU</th>
			<th>RAM</th>
			<th>GPU</th>
			<th>Last seen</th>
			<th>Last address</th>
		</tr>
	  </thead>

		<tbody>
			{% for system in systems %}
			<tr>
				<td class="table-view-pf-actions"><a href="{{url_for('system',name=system.name)}}" class="btn btn-lg btn-default" style="text-align: left">{{system.name}}</a></td>
				<td>{{system.metadata.hwinfo.sys}}</td>
				<td>{{system.metadata.hwinfo.cpu}}</td>
				<td>{{system.metadata.hwinfo.mem}}</td>
				<td>{{system.metadata.hwinfo.gpu}}</td>
				<td>{{system.last_seen_date}}</td>
				<td>{{system.last_seen_addr}}</td>
			</tr>
			{%endfor%}
	</table>

	<form class="content-view-pf-pagination table-view-pf-pagination clearfix" id="pagination1">
	  <div class="form-group">
		<select class="selectpicker pagination-pf-pagesize">
		  <option value="5">5</option>
		  <option value="10" >10</option>
		  <option value="15">15</option>
		  <option value="25" selected="selected">25</option>
		  <option value="50">50</option>
		</select>
		<span>per page</span>
	  </div>
	  <div class="form-group">
		<span><span class="pagination-pf-items-current">1-25</span> of <span class="pagination-pf-items-total">75</span></span>
		<ul class="pagination pagination-pf-back">
		  <li class="disabled"><a href="#" title="First Page"><span class="i fa fa-angle-double-left"></span></a></li>
		  <li class="disabled"><a href="#" title="Previous Page"><span class="i fa fa-angle-left"></span></a></li>
		</ul>
		<label for="pagination1-page" class="sr-only">Current Page</label>
		<input class="pagination-pf-page" type="text" value="1" id="pagination1-page"/>
		<span>of <span class="pagination-pf-pages">5</span></span>
		<ul class="pagination pagination-pf-forward">
		  <li><a href="#" title="Next Page"><span class="i fa fa-angle-right"></span></a></li>
		  <li><a href="#" title="Last Page"><span class="i fa fa-angle-double-right"></span></a></li>
		</ul>
	  </div>
	</form>

	<!-- Blank Slate HTML -->
	<div class="blank-slate-pf table-view-pf-empty hidden" id="emptyState1">
	  <div class="blank-slate-pf-icon">
		<span class="fa fa-fw fa-exclamation-triangle"></span>
	  </div>
	  <h1>
		No systems!
	  </h1>
	  <p>
		No systems have been registered, yet!
	  </p>
	</div>
	
		</div>
	</div>
</div>

<script>
$(document).ready(function() {

var dataSet = {{ systems|tojson|safe }};

// DataTable Config
$("#table1").DataTable({
  dom: "t",
  language: {
    zeroRecords: "No records found"
  },
  order: [[ 4, 'desc' ]],
  pfConfig: {
    emptyStateSelector: "#emptyState1",
    paginationSelector: "#pagination1",
    pageSize: 25,
  },
  select: {
    selector: 'td:first-child input[type="checkbox"]',
    style: 'multi'
  },
});

});
</script>


<script>
// Initialize Datatables
$(document).ready(function() {
$('.datatable').dataTable();
});
</script>
{% endblock %}
